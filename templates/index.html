<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–¥–æ–º–Ω—ã—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<h1>üêï –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–¥–æ–º–Ω—ã—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö üêà</h1>

<input type="file" id="fileInput">
<button onclick="runDetection()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É</button>

<h2 id="message"></h2>

<h2>–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
<pre id="result"></pre>

<h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
<button onclick="loadStats()">–û–±–Ω–æ–≤–∏—Ç—å</button>
<pre id="stats"></pre>

<script>
async function runDetection() {
    const file = document.getElementById("fileInput").files[0];
    if (!file) {
        alert("–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ");
        return;
    }

    const formData = new FormData();
    formData.append("file", file);

    const response = await fetch("/detect", {
        method: "POST",
        body: formData
    });

    const data = await response.json();

    // JSON –≤—ã–≤–æ–¥
    document.getElementById("result").textContent =
        JSON.stringify(data, null, 2);

    // –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    const msg = document.getElementById("message");
    const dogs = data.summary.dog;
    const cats = data.summary.cat;

    if (dogs === 0 && cats === 0) {
        msg.textContent = "‚ùå –ñ–∏–≤–æ—Ç–Ω—ã–µ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã";
        msg.style.color = "red";
    } else {
        let text = "‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ: ";
        msg.textContent = text;
        msg.style.color = "green";
    }
}
</script>


</body>
</html>

